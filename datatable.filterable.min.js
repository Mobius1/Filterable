/*! filterable 0.0.2
 * Â© 2017 Karl Saunders
 */
/**
 * @summary     filterable
 * @description Vanilla-DataTables extension that adds inputs to each column for filtering
 * @version     0.0.2
 * @file        datatable.filterable.js
 * @author      Karl Saunders
 * @contact     mobius1@gmx.com
 * @copyright   Copyright 2017 Karl Saunders
 *
 *
 * This source file is free software, available under the following license:
 *   MIT license - https://github.com/Mobius1/Vanilla-DataTables/blob/master/LICENSE
 *
 * This source file is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 * or FITNESS FOR A PARTICULAR PURPOSE. See the license files for details.
 *
 * For details please refer to: https://github.com/Mobius1/Vanilla-DataTables
 */
window.DataTable&&DataTable.extend("filterable",function(e,n,t){var i={classes:{filter:"dt-filter",filterable:"dt-filterable"}},l=function(e,n){return e&&e!==document.body&&(n(e)?e:l(e.parentNode,n))},o=function(e){this.config=t.extend(i,e)};return o.prototype.init=function(){if(!this.initialised){var n=this;n.config;n.inputs=[],n.row=t.createElement("tr"),t.each(e.table.header.cells,function(e){n.add({index:e.index})}),n.row.addEventListener("input",function(n){var t=l(n.target,function(e){return"INPUT"===e.nodeName});t&&e.columns().search(t.parentNode.cellIndex,t.value)}),e.table.head.appendChild(n.row),e.on("reset",function(e){t.each(n.inputs,function(e){e.value=null})}),e.on("columns.hide",function(e){t.each(e,function(e){n.row.cells[e].style.display="none"})}),e.on("columns.show",function(e){t.each(e,function(e){n.row.cells[e].style.display=""})}),e.on("columns.order",function(e){var i=[],l=[];t.each(e,function(e){i[e]=n.inputs[e],l.push(n.row.cells[e])}),t.each(l,function(e){n.row.appendChild(e)}),n.inputs=i}),e.on("columns.add",function(){n.add()}),e.on("columns.remove",function(e){n.row.removeChild(n.row.cells[e]),n.inputs.splice(e,1)}),this.initialised=!0}},o.prototype.add=function(n){var i=this,l=i.config,o=n&&void 0!==n.index?n.index:e.columns().count()-1,c=t.extend({placeholder:l.placeholders&&l.placeholders[o]?l.placeholders[o]:"Search "+e.table.header.cells[o].content},n),a=t.createElement("td",{class:l.classes.filterable}),d=t.createElement("input",{type:"text",class:l.classes.filter,placeholder:c.placeholder||""});e.config.fixedColumns&&(a.style.width=e.columnWidths[o]/e.rect.width*100+"%"),a.appendChild(d),i.row.appendChild(a),i.inputs.push(d)},o.prototype.destroy=function(){e.table.head.removeChild(this.row),this.initialised=!1},new o(n)});